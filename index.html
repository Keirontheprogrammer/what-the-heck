<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Stream</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navbar with Search -->
    <header class="navbar">
        <h1>Movie Stream</h1>
        <nav>
            <div class="dropdown">
                <button class="dropbtn">Categories</button>
                <div class="dropdown-content">
                    <a href="#" onclick="fetchCategory('Animation')">Animation</a>
                    <a href="#" onclick="fetchCategory('Horror')">Horror</a>
                    <a href="#" onclick="fetchCategory('Science Fiction')">Sci-Fi</a>
                    <a href="#" onclick="fetchCategory('Action')">Action</a>
                </div>
            </div>
            <a href="watch-later.html" class="watch-later-link">Watch Later</a>
            
            <!-- User Profile Dropdown -->
           
                    <!-- Options will be populated dynamically based on login state -->
                </div>
            </div>
        </nav>
        
        <input type="text" id="search-bar" placeholder="Search for movies..." onkeyup="searchMovies(event)">
        <button id="toggle-sound" onclick="toggleSound()">ðŸ”Š</button>
        <audio id="background-music" autoplay loop>
            <source src="Magical-Moments-chosic.com_.mp3" type="audio/mp3">
            Your browser does not support the audio element.
        </audio>
    </header>

    <!-- Main Banner -->
    <section id="main-banner" class="banner"></section>

    <!-- Search Results Section -->
    <section id="search-results" class="movie-section hidden">
        <h2>Search Results</h2>
        <div id="search-movies" class="carousel"></div>
    </section>

    <section id="trailers-section" class="trailers-section">
        <h2>Short Clips & Trailers</h2>
        <div id="trailers-container" class="trailers-container">
            <!-- Trailer items will be dynamically loaded here -->
        </div>
    </section>
    
    <!-- Modal for Trailer Playback -->
    <div id="trailer-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeTrailerModal()">&times;</span>
            <iframe id="trailer-video" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
    </div>
    

    <!-- Category Display Section -->
    <section id="categories">
        <!-- Sliders for each category will load here dynamically -->
    </section>

    <!-- Movie Modal -->
    <div id="movie-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <img id="modal-poster" src="" alt="Movie Poster">
            <h2 id="modal-title"></h2>
            <p id="modal-overview"></p>
            <button onclick="playMovie()">Play Now</button>
            <button onclick="addToWatchLater()">Add to Watch Later</button>
        </div>
    </div>

    <script src="java.js"></script>
    <script>
        const API_KEY = 'YOUR_TMDB_API_KEY';  // Replace with your API key
const BASE_URL = 'https://api.themoviedb.org/3';

// Fetch trailers for popular movies
function fetchTrailers() {
    fetch(`${BASE_URL}/movie/popular?api_key=${API_KEY}`)
        .then(response => response.json())
        .then(data => {
            const movies = data.results;
            const trailersContainer = document.getElementById('trailers-container');
            trailersContainer.innerHTML = '';

            movies.forEach(movie => {
                fetch(`${BASE_URL}/movie/${movie.id}/videos?api_key=${API_KEY}`)
                    .then(response => response.json())
                    .then(videoData => {
                        const trailers = videoData.results.filter(video => video.site === 'YouTube' && video.type === 'Trailer');
                        if (trailers.length > 0) {
                            const trailer = trailers[0];  // Get the first available trailer
                            const trailerElement = document.createElement('div');
                            trailerElement.classList.add('trailer-item');
                            trailerElement.innerHTML = `
                                <img src="https://img.youtube.com/vi/${trailer.key}/0.jpg" alt="${movie.title} Trailer">
                                <p>${movie.title}</p>
                            `;
                            trailerElement.onclick = () => openTrailerModal(trailer.key);
                            trailersContainer.appendChild(trailerElement);
                        }
                    });
            });
        });
}

// Open trailer modal
function openTrailerModal(videoKey) {
    const trailerModal = document.getElementById('trailer-modal');
    const trailerVideo = document.getElementById('trailer-video');
    trailerVideo.src = `https://www.youtube.com/embed/${videoKey}?autoplay=1`;
    trailerModal.style.display = 'block';
}

// Close trailer modal
function closeTrailerModal() {
    const trailerModal = document.getElementById('trailer-modal');
    const trailerVideo = document.getElementById('trailer-video');
    trailerVideo.src = '';  // Stop the video
    trailerModal.style.display = 'none';
}

// Load trailers on page load
window.onload = () => {
    fetchTrailers();
};


    </script>
</body>
</html>
